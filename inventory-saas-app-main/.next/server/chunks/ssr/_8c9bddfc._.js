module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},81892,a=>{"use strict";var b=a.i(37936);a.i(70396);var c=a.i(73727),d=a.i(4135);async function e(){let a=await (0,d.createSupabaseServerClient)();await a.auth.signOut(),(0,c.redirect)("/login")}(0,a.i(13095).ensureServerEntryExports)([e]),(0,b.registerServerReference)(e,"001130e10d4eee3c57bdbe243e47dcecd75ee72810",null),a.s(["logout",()=>e])},29356,a=>{"use strict";var b=a.i(81892),c=a.i(37936),d=a.i(4135),e=a.i(59019);async function f(a){let b=await (0,d.createSupabaseServerClient)(),c=await (0,e.getProfile)();if(!c||"admin"!==c.role)throw Error("Not allowed");if(a===c.id)throw Error("Cannot change your own role");await b.from("profiles").update({role:"admin"}).eq("id",a),await b.from("audit_logs").insert({actor_id:c.id,action:"PROMOTED_USER",target:a})}async function g(a){let b=await (0,d.createSupabaseServerClient)(),c=await (0,e.getProfile)();if(!c||"admin"!==c.role)throw Error("Not allowed");if(a===c.id)throw Error("Cannot change your own role");await b.from("profiles").update({role:"staff"}).eq("id",a),await b.from("audit_logs").insert({actor_id:c.id,action:"DEMOTED_USER",target:a})}(0,a.i(13095).ensureServerEntryExports)([f,g]),(0,c.registerServerReference)(f,"409c0a1a55c87213fca17d4e9c31617f122e18e432",null),(0,c.registerServerReference)(g,"40212d22676777f9e18d55dc9618e222f6c5690895",null),a.s([],38751),a.i(38751),a.s(["001130e10d4eee3c57bdbe243e47dcecd75ee72810",()=>b.logout,"40212d22676777f9e18d55dc9618e222f6c5690895",()=>g,"409c0a1a55c87213fca17d4e9c31617f122e18e432",()=>f],29356)}];

//# sourceMappingURL=_8c9bddfc._.js.map