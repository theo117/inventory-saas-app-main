{"version":3,"sources":["../../../../app/dashboard/audit/page.tsx"],"sourcesContent":["import { createSupabaseServerClient } from \"@/app/lib/supabase-server\"\nimport { getProfile } from \"@/app/lib/get-profile\"\nimport { redirect } from \"next/navigation\"\n\ntype AuditLog = {\n  id: string\n  action: string\n  target: string | null\n  created_at: string | null\n}\n\nexport default async function AuditPage() {\n  const supabase = await createSupabaseServerClient()\n  const me = await getProfile()\n\n  if (!me) redirect(\"/sign-in\")\n\n  const { data, error } = await supabase\n    .from(\"audit_logs\")\n    .select(\"id, action, target, created_at\")\n    .eq(\"actor_id\", me.id)\n    .order(\"created_at\", { ascending: false })\n\n  const logs = data as AuditLog[] | null\n\n  if (error) {\n    console.error(error)\n  }\n\n  return (\n    <div>\n      <h1 className=\"text-xl font-bold mb-4\">Audit Log</h1>\n\n      {logs?.map((log) => (\n        <div key={log.id} className=\"border p-2 mb-2\">\n          <strong>{log.action}</strong> — {log.target ?? \"—\"} —{\" \"}\n          {log.created_at\n            ? new Date(log.created_at).toLocaleString()\n            : \"Unknown time\"}\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":"gXAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OASe,eAAe,IAC5B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,0BAAA,AAA0B,IAC3C,EAAK,MAAM,CAAA,EAAA,EAAA,UAAA,AAAU,GAEvB,CAAC,GAAI,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,YAElB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAC3B,IAAI,CAAC,cACL,MAAM,CAAC,kCACP,EAAE,CAAC,WAAY,EAAG,EAAE,EACpB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAQ1C,OAJI,GACF,IADS,IACD,KAAK,CAAC,GAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kCAAyB,cAR9B,GAUF,IAAI,AAAC,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAiB,UAAU,4BAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAQ,EAAI,MAAM,GAAU,MAAI,EAAI,MAAM,EAAI,IAAI,KAAG,IACrD,EAAI,UAAU,CACX,IAAI,KAAK,EAAI,UAAU,EAAE,cAAc,GACvC,iBAJI,EAAI,EAAE,KASxB"}