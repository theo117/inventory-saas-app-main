{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/theod/Documents/Java%202025/business/New%20folder/inventory-saas-app-main/inventory-saas-app-main/app/dashboard/users/page.tsx"],"sourcesContent":["import { getProfile } from \"@/app/lib/get-profile\"\nimport { redirect } from \"next/navigation\"\nimport { updateUserRole } from \"./actions\"\nimport { createClient } from \"@supabase/supabase-js\"\n\ntype User = {\n  id: string\n  email: string\n  role: string\n}\n\nexport default async function UsersPage() {\n  const me = await getProfile()\n\n  if (!me || me.role !== \"admin\") redirect(\"/dashboard\")\n\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n  if (!url || !serviceRoleKey) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY\")\n  }\n  const supabase = createClient(url, serviceRoleKey)\n\n  const { data } = await supabase\n    .from(\"profiles\")\n    .select(\"id, email, role\")\n    .order(\"email\")\n\n  const users = data as User[] | null\n\n  return (\n    <div>\n      <h1 className=\"text-xl font-bold mb-4\">User Management</h1>\n\n      <div className=\"space-y-2\">\n        {users?.map((user) => (\n          <div\n            key={user.id}\n            className=\"flex justify-between items-center border p-3 rounded\"\n          >\n            <div>\n              <div className=\"font-medium\">{user.email}</div>\n              <div className=\"text-sm text-zinc-500\">{user.role}</div>\n            </div>\n\n            <div className=\"flex gap-2\">\n              {user.id === me.id ? (\n                <span className=\"text-xs text-zinc-500 self-center\">\n                  You\n                </span>\n              ) : (\n                <form action={updateUserRole} className=\"flex items-center gap-2\">\n                  <input type=\"hidden\" name=\"userId\" value={user.id} />\n                  <select\n                    name=\"role\"\n                    defaultValue={user.role}\n                    className=\"rounded border px-2 py-1 text-sm\"\n                  >\n                    <option value=\"staff\">staff</option>\n                    <option value=\"admin\">admin</option>\n                  </select>\n                  <button className=\"rounded bg-zinc-900 px-3 py-1 text-sm text-white hover:bg-zinc-700\">\n                    Save\n                  </button>\n                </form>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;AAQe,eAAe;IAC5B,MAAM,KAAK,MAAM,IAAA,0IAAU;IAE3B,IAAI,CAAC,MAAM,GAAG,IAAI,KAAK,SAAS,IAAA,iMAAQ,EAAC;IAEzC,MAAM;IACN,MAAM,iBAAiB,QAAQ,GAAG,CAAC,yBAAyB;IAC5D,IAAI,CAAC,OAAO,CAAC,gBAAgB;QAC3B,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,WAAW,IAAA,8LAAY,EAAC,KAAK;IAEnC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,YACL,MAAM,CAAC,mBACP,KAAK,CAAC;IAET,MAAM,QAAQ;IAEd,qBACE,8OAAC;;0BACC,8OAAC;gBAAG,WAAU;0BAAyB;;;;;;0BAEvC,8OAAC;gBAAI,WAAU;0BACZ,OAAO,IAAI,CAAC,qBACX,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;kDAAe,KAAK,KAAK;;;;;;kDACxC,8OAAC;wCAAI,WAAU;kDAAyB,KAAK,IAAI;;;;;;;;;;;;0CAGnD,8OAAC;gCAAI,WAAU;0CACZ,KAAK,EAAE,KAAK,GAAG,EAAE,iBAChB,8OAAC;oCAAK,WAAU;8CAAoC;;;;;yDAIpD,8OAAC;oCAAK,QAAQ,sJAAc;oCAAE,WAAU;;sDACtC,8OAAC;4CAAM,MAAK;4CAAS,MAAK;4CAAS,OAAO,KAAK,EAAE;;;;;;sDACjD,8OAAC;4CACC,MAAK;4CACL,cAAc,KAAK,IAAI;4CACvB,WAAU;;8DAEV,8OAAC;oDAAO,OAAM;8DAAQ;;;;;;8DACtB,8OAAC;oDAAO,OAAM;8DAAQ;;;;;;;;;;;;sDAExB,8OAAC;4CAAO,WAAU;sDAAqE;;;;;;;;;;;;;;;;;;uBAxBxF,KAAK,EAAE;;;;;;;;;;;;;;;;AAmCxB"}}]
}