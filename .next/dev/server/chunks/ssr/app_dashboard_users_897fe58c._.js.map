{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/theod/Documents/Java%202025/business/New%20folder/inventory-saas-app-main/inventory-saas-app-main/app/dashboard/users/actions.ts"],"sourcesContent":["\"use server\"\n\nimport { createSupabaseServerClient } from \"@/app/lib/supabase-server\"\nimport { getProfile } from \"@/app/lib/get-profile\"\n\nconst ALLOWED_ROLES = new Set([\"admin\", \"staff\"])\n\nexport async function updateUserRole(formData: FormData) {\n  const supabase = await createSupabaseServerClient()\n  const me = await getProfile()\n  if (!me || me.role !== \"admin\") throw new Error(\"Not allowed\")\n\n  const userId = String(formData.get(\"userId\") ?? \"\")\n  const role = String(formData.get(\"role\") ?? \"\")\n\n  if (!userId || !ALLOWED_ROLES.has(role)) {\n    throw new Error(\"Invalid role update\")\n  }\n\n  if (userId === me.id && role !== \"admin\") {\n    throw new Error(\"Cannot demote your own admin account\")\n  }\n\n  await supabase.from(\"profiles\").update({ role }).eq(\"id\", userId)\n\n  await supabase.from(\"audit_logs\").insert({\n    actor_id: me.id,\n    action: \"UPDATED_USER_ROLE\",\n    target: `${userId}:${role}`,\n  })\n}\n\nexport async function promoteUser(userId: string) {\n  const supabase = await createSupabaseServerClient()\n  const me = await getProfile()\n  if (!me || me.role !== \"admin\") throw new Error(\"Not allowed\")\n  if (userId === me.id) throw new Error(\"Cannot change your own role\")\n\n  await supabase.from(\"profiles\").update({ role: \"admin\" }).eq(\"id\", userId)\n\n  await supabase.from(\"audit_logs\").insert({\n    actor_id: me.id,\n    action: \"PROMOTED_USER\",\n    target: userId,\n  })\n}\n\nexport async function demoteUser(userId: string) {\n  const supabase = await createSupabaseServerClient()\n  const me = await getProfile()\n  if (!me || me.role !== \"admin\") throw new Error(\"Not allowed\")\n  if (userId === me.id) throw new Error(\"Cannot change your own role\")\n\n  await supabase.from(\"profiles\").update({ role: \"staff\" }).eq(\"id\", userId)\n\n  await supabase.from(\"audit_logs\").insert({\n    actor_id: me.id,\n    action: \"DEMOTED_USER\",\n    target: userId,\n  })\n}\n"],"names":[],"mappings":";;;;;;;MAgCsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,+CAAA"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/theod/Documents/Java%202025/business/New%20folder/inventory-saas-app-main/inventory-saas-app-main/app/dashboard/users/promote-button.tsx"],"sourcesContent":["\"use client\"\n\nimport { promoteUser } from \"./actions\"\nimport { useTransition } from \"react\"\n\nexport default function PromoteButton({ userId }: { userId: string }) {\n  const [isPending, startTransition] = useTransition()\n\n  return (\n    <button\n      onClick={() => startTransition(() => promoteUser(userId))}\n      disabled={isPending}\n      className=\"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-500\"\n    >\n      {isPending ? \"Promoting...\" : \"Promote\"}\n    </button>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,cAAc,EAAE,MAAM,EAAsB;IAClE,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,sNAAa;IAElD,qBACE,8OAAC;QACC,SAAS,IAAM,gBAAgB,IAAM,IAAA,gLAAW,EAAC;QACjD,UAAU;QACV,WAAU;kBAET,YAAY,iBAAiB;;;;;;AAGpC"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/theod/Documents/Java%202025/business/New%20folder/inventory-saas-app-main/inventory-saas-app-main/app/dashboard/users/actions.ts"],"sourcesContent":["\"use server\"\n\nimport { createSupabaseServerClient } from \"@/app/lib/supabase-server\"\nimport { getProfile } from \"@/app/lib/get-profile\"\n\nconst ALLOWED_ROLES = new Set([\"admin\", \"staff\"])\n\nexport async function updateUserRole(formData: FormData) {\n  const supabase = await createSupabaseServerClient()\n  const me = await getProfile()\n  if (!me || me.role !== \"admin\") throw new Error(\"Not allowed\")\n\n  const userId = String(formData.get(\"userId\") ?? \"\")\n  const role = String(formData.get(\"role\") ?? \"\")\n\n  if (!userId || !ALLOWED_ROLES.has(role)) {\n    throw new Error(\"Invalid role update\")\n  }\n\n  if (userId === me.id && role !== \"admin\") {\n    throw new Error(\"Cannot demote your own admin account\")\n  }\n\n  await supabase.from(\"profiles\").update({ role }).eq(\"id\", userId)\n\n  await supabase.from(\"audit_logs\").insert({\n    actor_id: me.id,\n    action: \"UPDATED_USER_ROLE\",\n    target: `${userId}:${role}`,\n  })\n}\n\nexport async function promoteUser(userId: string) {\n  const supabase = await createSupabaseServerClient()\n  const me = await getProfile()\n  if (!me || me.role !== \"admin\") throw new Error(\"Not allowed\")\n  if (userId === me.id) throw new Error(\"Cannot change your own role\")\n\n  await supabase.from(\"profiles\").update({ role: \"admin\" }).eq(\"id\", userId)\n\n  await supabase.from(\"audit_logs\").insert({\n    actor_id: me.id,\n    action: \"PROMOTED_USER\",\n    target: userId,\n  })\n}\n\nexport async function demoteUser(userId: string) {\n  const supabase = await createSupabaseServerClient()\n  const me = await getProfile()\n  if (!me || me.role !== \"admin\") throw new Error(\"Not allowed\")\n  if (userId === me.id) throw new Error(\"Cannot change your own role\")\n\n  await supabase.from(\"profiles\").update({ role: \"staff\" }).eq(\"id\", userId)\n\n  await supabase.from(\"audit_logs\").insert({\n    actor_id: me.id,\n    action: \"DEMOTED_USER\",\n    target: userId,\n  })\n}\n"],"names":[],"mappings":";;;;;;;MA+CsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,8CAAA"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/theod/Documents/Java%202025/business/New%20folder/inventory-saas-app-main/inventory-saas-app-main/app/dashboard/users/demote-button.tsx"],"sourcesContent":["\"use client\"\n\nimport { demoteUser } from \"./actions\"\nimport { useTransition } from \"react\"\n\nexport default function DemoteButton({ userId }: { userId: string }) {\n  const [isPending, startTransition] = useTransition()\n\n  return (\n    <button\n      onClick={() => startTransition(() => demoteUser(userId))}\n      disabled={isPending}\n      className=\"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-500\"\n    >\n      {isPending ? \"Demoting...\" : \"Demote\"}\n    </button>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,aAAa,EAAE,MAAM,EAAsB;IACjE,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,sNAAa;IAElD,qBACE,8OAAC;QACC,SAAS,IAAM,gBAAgB,IAAM,IAAA,+KAAU,EAAC;QAChD,UAAU;QACV,WAAU;kBAET,YAAY,gBAAgB;;;;;;AAGnC"}}]
}